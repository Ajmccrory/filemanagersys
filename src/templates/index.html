{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2>Create New Case</h2>
    <form action="{{ url_for('cases.new_case') }}" method="POST" enctype="multipart/form-data">
        <input type="text" name="title" placeholder="Case Title" required>
        <textarea name="description" placeholder="Case Description"></textarea>
        <input type="file" name="file" accept=".pdf,.doc,.docx,.txt">
        <button type="submit">Create Case</button>
    </form>

    <h2>Your Cases</h2>
    <div class="cases-list">
        {% for case in cases %}
        <div class="case-card" data-case-id="{{ case.id }}">
            <h3><a href="#" class="case-title">{{ case.title }}</a></h3>
            <p>{{ case.description }}</p>
            <small>Created: {{ case.date_created.strftime('%Y-%m-%d') }}</small>
            <div class="case-actions">
                <button class="edit-case">Edit</button>
                <form action="{{ url_for('cases.delete_case', case_id=case.id) }}" method="POST" style="display: inline;">
                    <button type="submit" class="delete-case">Delete</button>
                </form>
                {% if case.file_path %}
                <a href="{{ url_for('cases.download_case_file', case_id=case.id) }}" class="download-file">Download File</a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Case Modal -->
<div id="caseModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <div id="caseDetails"></div>
    </div>
</div>
{% endblock %}