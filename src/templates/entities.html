{% extends "base.html" %}

{% block content %}
<div class="entities-container">
    <div class="filter-controls">
        <select id="entityFilter" onchange="updateFilter(this.value)">
            <option value="all" {% if filter_type == 'all' %}selected{% endif %}>All</option>
            <option value="people" {% if filter_type == 'people' %}selected{% endif %}>People</option>
            <option value="organizations" {% if filter_type == 'organizations' %}selected{% endif %}>Organizations</option>
        </select>
    </div>

    <div class="entities-grid">
        {% if filter_type in ['all', 'people'] %}
        <div class="people-section">
            <h2>People</h2>
            <button onclick="showAddPersonModal()">Add Person</button>
            <div class="entities-list">
                {% for person in people %}
                <div class="entity-card">
                    <h3>{{ person.name }}</h3>
                    <p class="role">{{ person.role }}</p>
                    <p class="facts-count">Facts: {{ person.facts|length }}</p>
                    <div class="tags">
                        {% for tag in person.tags %}
                        <span class="tag">{{ tag.name }}</span>
                        {% endfor %}
                    </div>
                    <button onclick="showFactsModal('{{ person.id }}', 'person')">View/Edit Facts</button>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        {% if filter_type in ['all', 'organizations'] %}
        <div class="organizations-section">
            <!-- Similar structure for organizations -->
        </div>
        {% endif %}
    </div>
</div>

<!-- Modals for adding/editing entities and facts -->
{% include 'partials/entity_modals.html' %}
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/entities.js') }}"></script>
{% endblock %} 